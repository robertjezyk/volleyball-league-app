// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model League {
  id     String @id @default(uuid())
  type   String @unique
  season String
  Team   Team[]

  @@unique([id, type])
}

model Team {
  id          String       @id @default(uuid())
  name        String
  leagueType  String?
  description String?
  address     String?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @default(now()) @updatedAt

  // Reference to the League model
  leagueId     String?
  league       League?       @relation(fields: [leagueId, leagueType], references: [id, type])
  TeamStanding TeamStanding?
}


model TeamStanding {
  id             Int      @id @default(autoincrement())
  team           Team     @relation(fields: [teamStandingId], references: [id])
  points         Int      @default(0)
  played         Int      @default(0)
  won            Int      @default(0)
  lost           Int      @default(0)
  setsFor        Int      @default(0)
  setsAgainst    Int      @default(0)
  pointsFor      Int      @default(0)
  pointsAgainst  Int      @default(0)
  teamStandingId String   @unique @map("_teamStandingId")
  updatedAt      DateTime @default(now()) @updatedAt

  @@index([teamStandingId], name: "teamStanding_teamStandingId_index")
}
